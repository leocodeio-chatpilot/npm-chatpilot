{"version":3,"file":"index.cjs","sources":["../src/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { SiChatbot } from \"react-icons/si\";\nimport { GiCrossedBones } from \"react-icons/gi\";\nimport { IoSendSharp } from \"react-icons/io5\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { toast, Toaster } from \"react-hot-toast\";\n\nexport const Capitalize = ({ str }: { str: string }) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\ninterface Message {\n  role: string;\n  content: string;\n}\n\nexport const ChatPilotBot = ({\n  apiKey,\n  apiUrl = \"https://api.chatpilot.com\",\n  xApiKey,\n}: {\n  apiKey: string;\n  xApiKey: string;\n  apiUrl?: string;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!inputMessage.trim()) return;\n\n    const newMessage = { role: \"user\", content: inputMessage };\n    setMessages([...messages, newMessage]);\n    setInputMessage(\"\");\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(`${apiUrl}/prompt`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": xApiKey,\n        },\n        body: JSON.stringify({\n          queryText: inputMessage,\n          apiKey: apiKey,\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to get response\");\n\n      const data = await response.json();\n      setMessages((prev) => [\n        ...prev,\n        { role: \"assistant\", content: data.payload.response },\n      ]);\n    } catch (error) {\n      toast.error(\"Failed to get response\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const styles = {\n    container: {\n      position: \"fixed\",\n      bottom: \"2rem\",\n      right: \"2rem\",\n      zIndex: 50,\n    },\n    chatContainer: {\n      maxWidth: \"25rem\",\n      maxHeight: \"35rem\",\n      backgroundColor: \"white\",\n      borderRadius: \"0.75rem\",\n      boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\n      overflow: \"hidden\",\n      zIndex: 50,\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"end\",\n      padding: \"0.75rem\",\n    },\n    closeButton: {\n      cursor: \"pointer\",\n      transition: \"transform 0.3s ease-in-out\",\n      \":hover\": {\n        transform: \"scale(1.25)\",\n      },\n    },\n    messagesContainer: {\n      height: \"20rem\",\n      overflowY: \"auto\",\n      padding: \"1rem\",\n    },\n    messageWrapper: (isUser: boolean) => ({\n      marginBottom: \"0.75rem\",\n      display: \"flex\",\n      justifyContent: isUser ? \"flex-end\" : \"flex-start\",\n    }),\n    message: (isUser: boolean) => ({\n      maxWidth: \"75%\",\n      borderRadius: \"1rem\",\n      padding: \"0.75rem 1rem\",\n      backgroundColor: isUser ? \"#3b82f6\" : \"#f3f4f6\",\n      color: isUser ? \"white\" : \"black\",\n    }),\n    noMessages: {\n      textAlign: \"center\",\n      color: \"#9ca3af\",\n    },\n    inputContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"0.5rem\",\n      padding: \"0.5rem\",\n      borderTop: \"1px solid #e5e7eb\",\n    },\n    input: {\n      flexGrow: 1,\n      padding: \"0.75rem\",\n      borderRadius: \"0.5rem\",\n      border: \"1px solid #e5e7eb\",\n      outline: \"none\",\n      \":focus\": {\n        borderColor: \"#3b82f6\",\n      },\n    },\n    sendButton: {\n      backgroundColor: \"#3b82f6\",\n      color: \"white\",\n      borderRadius: \"0.5rem\",\n      \":hover\": {\n        backgroundColor: \"#2563eb\",\n      },\n    },\n    chatButton: {\n      backgroundColor: \"#ef4444\",\n      color: \"white\",\n      padding: \"0.5rem\",\n      borderRadius: \"9999px\",\n      boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.1)\",\n      \":hover\": {\n        backgroundColor: \"#dc2626\",\n      },\n    },\n    chatbotIcon: {\n      width: \"1.5rem\",\n      height: \"1.5rem\",\n    },\n    inputWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"0.5rem\",\n      padding: \"0.5rem\",\n      borderTop: \"1px solid #e5e7eb\",\n    },\n  };\n\n  return (\n    <div style={styles.container as React.CSSProperties}>\n      <Toaster position=\"top-right\" />\n      {isOpen ? (\n        <div style={styles.chatContainer as React.CSSProperties}>\n          <div style={styles.header as React.CSSProperties}>\n            <button onClick={() => setIsOpen(false)} className=\"close-button\">\n              <GiCrossedBones\n                style={styles.closeButton as React.CSSProperties}\n              />\n            </button>\n          </div>\n\n          <div style={styles.messagesContainer as React.CSSProperties}>\n            {messages.map((message, index) => (\n              <div\n                key={index}\n                style={styles.messageWrapper(message.role === \"user\")}\n              >\n                <div style={styles.message(message.role === \"user\")}>\n                  {message.content}\n                </div>\n              </div>\n            ))}\n            {isLoading && (\n              <div style={styles.messageWrapper(false)}>\n                <div style={styles.message(false)}>Typing...</div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <form\n            onSubmit={handleSendMessage}\n            style={styles.inputContainer as React.CSSProperties}\n          >\n            <div style={styles.inputWrapper as React.CSSProperties}>\n              <input\n                type=\"text\"\n                value={inputMessage}\n                onChange={(e) => setInputMessage(e.target.value)}\n                placeholder=\"Type your message...\"\n                style={styles.input as React.CSSProperties}\n              />\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                style={styles.sendButton as React.CSSProperties}\n              >\n                <IoSendSharp style={styles.sendButton as React.CSSProperties} />\n              </button>\n            </div>\n          </form>\n        </div>\n      ) : (\n        <button onClick={() => setIsOpen(true)} className=\"chat-button\">\n          <SiChatbot style={styles.chatbotIcon as React.CSSProperties} />\n        </button>\n      )}\n    </div>\n  );\n};\n"],"names":["_ref","str","charAt","toUpperCase","slice","_ref2","apiKey","_ref2$apiUrl","apiUrl","xApiKey","_useState","useState","isOpen","setIsOpen","_useState2","messages","setMessages","_useState3","inputMessage","setInputMessage","_useState4","isLoading","setIsLoading","messagesEndRef","useRef","useEffect","_messagesEndRef$curre","current","scrollIntoView","behavior","styles","container","position","bottom","right","zIndex","chatContainer","maxWidth","maxHeight","backgroundColor","borderRadius","boxShadow","overflow","header","display","alignItems","justifyContent","padding","closeButton","cursor","transition","transform","messagesContainer","height","overflowY","messageWrapper","isUser","marginBottom","message","color","noMessages","textAlign","inputContainer","gap","borderTop","input","flexGrow","border","outline","borderColor","sendButton","chatButton","chatbotIcon","width","inputWrapper","React","createElement","style","Toaster","onClick","className","GiCrossedBones","map","index","key","role","content","ref","onSubmit","e","preventDefault","trim","concat","Promise","resolve","fetch","method","headers","body","JSON","stringify","queryText","then","response","ok","Error","json","data","prev","payload","_catch","toast","error","_finallyRethrows","_wasThrown","_result","reject","type","value","onChange","target","placeholder","disabled","IoSendSharp","SiChatbot"],"mappings":"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"}