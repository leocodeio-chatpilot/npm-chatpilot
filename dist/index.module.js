import*as t from"react";import{useState as e,useRef as o,useEffect as a}from"react";import{SiChatbot as c}from"react-icons/si";import{GiCrossedBones as l}from"react-icons/gi";import{IoSendSharp as r}from"react-icons/io5";import{Toaster as i,toast as n}from"react-hot-toast";var p=function(t){var e=t.str;return e.charAt(0).toUpperCase()+e.slice(1)},h=function(p){var h=p.apiKey,s=p.apiUrl,m=void 0===s?"https://api.chatpilot.com":s,u=e(!1),f=u[0],d=u[1],v=e([]),b=v[0],g=v[1],E=e(""),y=E[0],N=E[1],w=e(!1),x=w[0],P=w[1],j=o(null);return a(function(){var t;null==(t=j.current)||t.scrollIntoView({behavior:"smooth"})},[b]),t.createElement("div",{className:"chatpilot-fixed chatpilot-bottom-4 chatpilot-right-4"},t.createElement(i,{position:"top-right"}),f?t.createElement("div",{className:"chatpilot-container"},t.createElement("div",{className:"chatpilot-header"},t.createElement("div",{className:"chatpilot-flex chatpilot-items-center chatpilot-gap-2"},t.createElement(c,{className:"chatpilot-w-6 chatpilot-h-6"}),t.createElement("span",{className:"chatpilot-font-semibold"},"ChatPilot")),t.createElement("button",{onClick:function(){return d(!1)},className:"chatpilot-p-2 chatpilot-rounded-full hover:chatpilot-bg-gray-100"},t.createElement(l,{className:"chatpilot-w-5 chatpilot-h-5"}))),t.createElement("div",{className:"chatpilot-h-96 chatpilot-overflow-y-auto chatpilot-p-4"},b.map(function(e,o){return t.createElement("div",{key:o,className:"chatpilot-mb-4 chatpilot-flex "+("user"===e.role?"chatpilot-justify-end":"chatpilot-justify-start")},t.createElement("div",{className:"chatpilot-max-w-[80%] chatpilot-rounded-lg chatpilot-p-3 "+("user"===e.role?"chatpilot-bg-blue-500 chatpilot-text-white":"chatpilot-bg-gray-200")},e.content))}),x&&t.createElement("div",{className:"chatpilot-flex chatpilot-justify-start chatpilot-mb-4"},t.createElement("div",{className:"chatpilot-bg-gray-200 chatpilot-rounded-lg chatpilot-p-3"},"Typing...")),t.createElement("div",{ref:j})),t.createElement("form",{onSubmit:function(t){try{if(t.preventDefault(),!y.trim())return Promise.resolve();var e={role:"user",content:y};return g([].concat(b,[e])),N(""),P(!0),Promise.resolve(function(t,o){try{var a=function(t,o){try{var a=Promise.resolve(fetch(m+"/prompt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h},body:JSON.stringify({messages:[].concat(b,[e])})})).then(function(t){if(!t.ok)throw new Error("Failed to get response");return Promise.resolve(t.json()).then(function(t){g(function(e){return[].concat(e,[{role:"assistant",content:t.response}])})})})}catch(t){return o()}return a&&a.then?a.then(void 0,o):a}(0,function(){n.error("Failed to get response")})}catch(t){return o(!0,t)}return a&&a.then?a.then(o.bind(null,!1),o.bind(null,!0)):o(!1,a)}(0,function(t,e){if(P(!1),t)throw e;return e}))}catch(t){return Promise.reject(t)}},className:"chatpilot-p-4 chatpilot-border-t"},t.createElement("div",{className:"chatpilot-flex chatpilot-gap-2"},t.createElement("input",{type:"text",value:y,onChange:function(t){return N(t.target.value)},placeholder:"Type your message...",className:"chatpilot-flex-1 chatpilot-rounded-lg chatpilot-border chatpilot-p-2 chatpilot-focus:outline-none chatpilot-focus:ring-2 chatpilot-focus:ring-blue-500"}),t.createElement("button",{type:"submit",disabled:x,className:"chatpilot-bg-blue-500 chatpilot-text-white chatpilot-p-2 chatpilot-rounded-lg hover:chatpilot-bg-blue-600 chatpilot-transition-colors disabled:chatpilot-opacity-50"},t.createElement(r,{className:"chatpilot-w-5 chatpilot-h-5"}))))):t.createElement("button",{onClick:function(){return d(!0)},className:"chatpilot-bg-blue-500 chatpilot-text-white chatpilot-p-4 chatpilot-rounded-full hover:chatpilot-bg-blue-600 chatpilot-transition-colors"},t.createElement(c,{className:"chatpilot-w-6 chatpilot-h-6"})))};export{p as Capitalize,h as ChatPilotBot};
//# sourceMappingURL=index.module.js.map
