import*as e from"react";import{useState as t,useRef as r,useEffect as n}from"react";import{SiChatbot as o}from"react-icons/si";import{GiCrossedBones as a}from"react-icons/gi";import{IoSendSharp as i}from"react-icons/io5";import{Toaster as s,toast as c}from"react-hot-toast";var l=function(e){var t=e.str;return t.charAt(0).toUpperCase()+t.slice(1)},m=function(l){var m=l.apiKey,u=l.apiUrl,d=void 0===u?"https://api.chatpilot.com":u,p=l.xApiKey,f=t(!1),h=f[0],g=f[1],b=t([]),y=b[0],v=b[1],x=t(""),C=x[0],E=x[1],w=t(!1),k=w[0],I=w[1],B=r(null);n(function(){var e;null==(e=B.current)||e.scrollIntoView({behavior:"smooth"})},[y]);var W={container:{position:"fixed",bottom:"2rem",right:"2rem",zIndex:50},chatContainer:{maxWidth:"25rem",maxHeight:"35rem",backgroundColor:"white",borderRadius:"0.75rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",overflow:"hidden",zIndex:50},header:{display:"flex",alignItems:"center",justifyContent:"end",padding:"0.75rem"},closeButton:{cursor:"pointer",transition:"transform 0.3s ease-in-out",":hover":{transform:"scale(1.25)"}},messagesContainer:{height:"20rem",overflowY:"auto",padding:"1rem"},messageWrapper:function(e){return{marginBottom:"0.75rem",display:"flex",justifyContent:e?"flex-end":"flex-start"}},message:function(e){return{maxWidth:"75%",borderRadius:"1rem",padding:"0.75rem 1rem",backgroundColor:e?"#3b82f6":"#f3f4f6",color:e?"white":"black"}},noMessages:{textAlign:"center",color:"#9ca3af"},inputContainer:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderTop:"1px solid #e5e7eb"},input:{flexGrow:1,padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",outline:"none",":focus":{borderColor:"#3b82f6"}},sendButton:{backgroundColor:"#3b82f6",color:"white",borderRadius:"0.5rem",":hover":{backgroundColor:"#2563eb"}},chatButton:{backgroundColor:"#ef4444",color:"white",padding:"0.5rem",borderRadius:"9999px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",":hover":{backgroundColor:"#dc2626"}},chatbotIcon:{width:"1.5rem",height:"1.5rem"},inputWrapper:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderTop:"1px solid #e5e7eb"}};return e.createElement("div",{style:W.container},e.createElement(s,{position:"top-right"}),h?e.createElement("div",{style:W.chatContainer},e.createElement("div",{style:W.header},e.createElement("button",{onClick:function(){return g(!1)},className:"close-button"},e.createElement(a,{style:W.closeButton}))),e.createElement("div",{style:W.messagesContainer},y.map(function(t,r){return e.createElement("div",{key:r,style:W.messageWrapper("user"===t.role)},e.createElement("div",{style:W.message("user"===t.role)},t.content))}),k&&e.createElement("div",{style:W.messageWrapper(!1)},e.createElement("div",{style:W.message(!1)},"Typing...")),e.createElement("div",{ref:B})),e.createElement("form",{onSubmit:function(e){try{return e.preventDefault(),C.trim()?(v([].concat(y,[{role:"user",content:C}])),E(""),I(!0),Promise.resolve(function(e,t){try{var r=function(e,t){try{var r=Promise.resolve(fetch(d+"/prompt",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":p},body:JSON.stringify({queryInput:C,apiKey:m})})).then(function(e){if(!e.ok)throw new Error("Failed to get response");return Promise.resolve(e.json()).then(function(e){v(function(t){return[].concat(t,[{role:"assistant",content:e.response}])})})})}catch(e){return t()}return r&&r.then?r.then(void 0,t):r}(0,function(){c.error("Failed to get response")})}catch(e){return t(!0,e)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,r)}(0,function(e,t){if(I(!1),e)throw t;return t}))):Promise.resolve()}catch(e){return Promise.reject(e)}},style:W.inputContainer},e.createElement("div",{style:W.inputWrapper},e.createElement("input",{type:"text",value:C,onChange:function(e){return E(e.target.value)},placeholder:"Type your message...",style:W.input}),e.createElement("button",{type:"submit",disabled:k,style:W.sendButton},e.createElement(i,{style:W.sendButton}))))):e.createElement("button",{onClick:function(){return g(!0)},className:"chat-button"},e.createElement(o,{style:W.chatbotIcon})))};export{l as Capitalize,m as ChatPilotBot};
//# sourceMappingURL=index.module.js.map
