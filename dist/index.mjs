import*as e from"react";import{useState as t,useRef as r,useEffect as o}from"react";import{SiChatbot as a}from"react-icons/si";import{GiCrossedBones as n}from"react-icons/gi";import{IoSendSharp as i}from"react-icons/io5";import{Toaster as s,toast as l}from"react-hot-toast";const m=({str:e})=>e.charAt(0).toUpperCase()+e.slice(1),d=({apiKey:m,apiUrl:d="https://api.chatpilot.com"})=>{const[c,p]=t(!1),[h,u]=t([]),[g,b]=t(""),[y,f]=t(!1),E=r(null);o(()=>{var e;null==(e=E.current)||e.scrollIntoView({behavior:"smooth"})},[h]);const C={container:{position:"fixed",bottom:"1rem",right:"1rem"},chatContainer:{width:"24rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",backgroundColor:"white",borderBottom:"1px solid #e5e7eb"},headerTitle:{display:"flex",alignItems:"center",gap:"0.5rem"},closeButton:{padding:"0.5rem",borderRadius:"9999px",":hover":{backgroundColor:"#f3f4f6"}},messagesContainer:{height:"24rem",overflowY:"auto",padding:"1rem"},messageWrapper:e=>({marginBottom:"1rem",display:"flex",justifyContent:e?"flex-end":"flex-start"}),message:e=>({maxWidth:"80%",borderRadius:"0.5rem",padding:"0.75rem",backgroundColor:e?"#3b82f6":"#e5e7eb",color:e?"white":"black"}),inputContainer:{padding:"1rem",borderTop:"1px solid #e5e7eb"},inputWrapper:{display:"flex",gap:"0.5rem"},input:{flexGrow:1,borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.5rem",outline:"none",":focus":{ring:"2px",ringColor:"#3b82f6"}},sendButton:{backgroundColor:"#3b82f6",color:"white",padding:"0.5rem",borderRadius:"0.5rem",":hover":{backgroundColor:"#2563eb"},":disabled":{opacity:.5}},chatButton:{backgroundColor:"#3b82f6",color:"white",padding:"1rem",borderRadius:"9999px",":hover":{backgroundColor:"#2563eb"}}};return e.createElement("div",{className:"chatpilot-container"},e.createElement(s,{position:"top-right"}),c?e.createElement("div",{style:C.chatContainer},e.createElement("div",{style:C.header},e.createElement("div",{style:C.headerTitle},e.createElement(a,{style:{width:"1.5rem",height:"1.5rem"}}),e.createElement("span",{style:{fontWeight:600}},"ChatPilot")),e.createElement("button",{onClick:()=>p(!1),style:C.closeButton},e.createElement(n,{style:{width:"1.25rem",height:"1.25rem"}}))),e.createElement("div",{className:"chatpilot-messages"},h.map((t,r)=>e.createElement("div",{key:r,style:C.messageWrapper("user"===t.role)},e.createElement("div",{style:C.message("user"===t.role)},t.content))),y&&e.createElement("div",{style:C.messageWrapper(!1)},e.createElement("div",{style:C.message(!1)},"Typing...")),e.createElement("div",{ref:E})),e.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),!g.trim())return;const t={role:"user",content:g};u([...h,t]),b(""),f(!0);try{const e=await fetch(`${d}/prompt`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({messages:[...h,t]})});if(!e.ok)throw new Error("Failed to get response");const r=await e.json();u(e=>[...e,{role:"assistant",content:r.response}])}catch(e){l.error("Failed to get response")}finally{f(!1)}},style:C.inputContainer},e.createElement("div",{style:C.inputWrapper},e.createElement("input",{type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"Type your message...",style:C.input}),e.createElement("button",{type:"submit",disabled:y,style:C.sendButton},e.createElement(i,{style:{width:"1.25rem",height:"1.25rem"}}))))):e.createElement("button",{onClick:()=>p(!0),style:C.chatButton},e.createElement(a,{style:{width:"1.5rem",height:"1.5rem"}})))};export{m as Capitalize,d as ChatPilotBot};
//# sourceMappingURL=index.mjs.map
