import*as t from"react";import{useState as e,useRef as a,useEffect as o}from"react";import{SiChatbot as l}from"react-icons/si";import{GiCrossedBones as c}from"react-icons/gi";import{IoSendSharp as i}from"react-icons/io5";import{Toaster as r,toast as p}from"react-hot-toast";const s=({str:t})=>t.charAt(0).toUpperCase()+t.slice(1),h=({apiKey:s,apiUrl:h="https://api.chatpilot.com"})=>{const[n,m]=e(!1),[u,d]=e([]),[f,g]=e(""),[b,E]=e(!1),y=a(null);return o(()=>{var t;null==(t=y.current)||t.scrollIntoView({behavior:"smooth"})},[u]),t.createElement("div",{className:"chatpilot-fixed chatpilot-bottom-4 chatpilot-right-4"},t.createElement(r,{position:"top-right"}),n?t.createElement("div",{className:"chatpilot-container"},t.createElement("div",{className:"chatpilot-header"},t.createElement("div",{className:"chatpilot-flex chatpilot-items-center chatpilot-gap-2"},t.createElement(l,{className:"chatpilot-w-6 chatpilot-h-6"}),t.createElement("span",{className:"chatpilot-font-semibold"},"ChatPilot")),t.createElement("button",{onClick:()=>m(!1),className:"chatpilot-p-2 chatpilot-rounded-full hover:chatpilot-bg-gray-100"},t.createElement(c,{className:"chatpilot-w-5 chatpilot-h-5"}))),t.createElement("div",{className:"chatpilot-h-96 chatpilot-overflow-y-auto chatpilot-p-4"},u.map((e,a)=>t.createElement("div",{key:a,className:"chatpilot-mb-4 chatpilot-flex "+("user"===e.role?"chatpilot-justify-end":"chatpilot-justify-start")},t.createElement("div",{className:"chatpilot-max-w-[80%] chatpilot-rounded-lg chatpilot-p-3 "+("user"===e.role?"chatpilot-bg-blue-500 chatpilot-text-white":"chatpilot-bg-gray-200")},e.content))),b&&t.createElement("div",{className:"chatpilot-flex chatpilot-justify-start chatpilot-mb-4"},t.createElement("div",{className:"chatpilot-bg-gray-200 chatpilot-rounded-lg chatpilot-p-3"},"Typing...")),t.createElement("div",{ref:y})),t.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),!f.trim())return;const e={role:"user",content:f};d([...u,e]),g(""),E(!0);try{const t=await fetch(`${h}/prompt`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({messages:[...u,e]})});if(!t.ok)throw new Error("Failed to get response");const a=await t.json();d(t=>[...t,{role:"assistant",content:a.response}])}catch(t){p.error("Failed to get response")}finally{E(!1)}},className:"chatpilot-p-4 chatpilot-border-t"},t.createElement("div",{className:"chatpilot-flex chatpilot-gap-2"},t.createElement("input",{type:"text",value:f,onChange:t=>g(t.target.value),placeholder:"Type your message...",className:"chatpilot-flex-1 chatpilot-rounded-lg chatpilot-border chatpilot-p-2 chatpilot-focus:outline-none chatpilot-focus:ring-2 chatpilot-focus:ring-blue-500"}),t.createElement("button",{type:"submit",disabled:b,className:"chatpilot-bg-blue-500 chatpilot-text-white chatpilot-p-2 chatpilot-rounded-lg hover:chatpilot-bg-blue-600 chatpilot-transition-colors disabled:chatpilot-opacity-50"},t.createElement(i,{className:"chatpilot-w-5 chatpilot-h-5"}))))):t.createElement("button",{onClick:()=>m(!0),className:"chatpilot-bg-blue-500 chatpilot-text-white chatpilot-p-4 chatpilot-rounded-full hover:chatpilot-bg-blue-600 chatpilot-transition-colors"},t.createElement(l,{className:"chatpilot-w-6 chatpilot-h-6"})))};export{s as Capitalize,h as ChatPilotBot};
//# sourceMappingURL=index.mjs.map
