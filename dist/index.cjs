var e=require("react"),t=require("react-icons/si"),r=require("react-icons/gi"),n=require("react-icons/io5"),o=require("react-hot-toast");function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var i=/*#__PURE__*/a(e);exports.Capitalize=function(e){var t=e.str;return t.charAt(0).toUpperCase()+t.slice(1)},exports.ChatPilotBot=function(a){var s=a.apiKey,c=a.apiUrl,l=void 0===c?"https://api.chatpilot.com":c,u=e.useState(!1),d=u[0],m=u[1],p=e.useState([]),f=p[0],h=p[1],b=e.useState(""),g=b[0],y=b[1],v=e.useState(!1),x=v[0],C=v[1],E=e.useRef(null);e.useEffect(function(){var e;null==(e=E.current)||e.scrollIntoView({behavior:"smooth"})},[f]);var w={container:{position:"fixed",bottom:"2rem",right:"2rem",zIndex:50},chatContainer:{maxWidth:"25rem",maxHeight:"35rem",backgroundColor:"white",borderRadius:"0.75rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",overflow:"hidden",zIndex:50},header:{display:"flex",alignItems:"center",justifyContent:"end",padding:"0.75rem"},closeButton:{cursor:"pointer",transition:"transform 0.3s ease-in-out",":hover":{transform:"scale(1.25)"}},messagesContainer:{height:"20rem",overflowY:"auto",padding:"1rem"},messageWrapper:function(e){return{marginBottom:"0.75rem",display:"flex",justifyContent:e?"flex-end":"flex-start"}},message:function(e){return{maxWidth:"75%",borderRadius:"1rem",padding:"0.75rem 1rem",backgroundColor:e?"#3b82f6":"#f3f4f6",color:e?"white":"black"}},noMessages:{textAlign:"center",color:"#9ca3af"},inputContainer:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderTop:"1px solid #e5e7eb"},input:{flexGrow:1,padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",outline:"none",":focus":{borderColor:"#3b82f6"}},sendButton:{backgroundColor:"#3b82f6",color:"white",borderRadius:"0.5rem",":hover":{backgroundColor:"#2563eb"}},chatButton:{backgroundColor:"#ef4444",color:"white",padding:"0.5rem",borderRadius:"9999px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",":hover":{backgroundColor:"#dc2626"}},chatbotIcon:{width:"1.5rem",height:"1.5rem"},inputWrapper:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderTop:"1px solid #e5e7eb"}};return i.createElement("div",{style:w.container},i.createElement(o.Toaster,{position:"top-right"}),d?i.createElement("div",{style:w.chatContainer},i.createElement("div",{style:w.header},i.createElement("button",{onClick:function(){return m(!1)},className:"close-button"},i.createElement(r.GiCrossedBones,{style:w.closeButton}))),i.createElement("div",{style:w.messagesContainer},f.map(function(e,t){return i.createElement("div",{key:t,style:w.messageWrapper("user"===e.role)},i.createElement("div",{style:w.message("user"===e.role)},e.content))}),x&&i.createElement("div",{style:w.messageWrapper(!1)},i.createElement("div",{style:w.message(!1)},"Typing...")),i.createElement("div",{ref:E})),i.createElement("form",{onSubmit:function(e){try{if(e.preventDefault(),!g.trim())return Promise.resolve();var t={role:"user",content:g};return h([].concat(f,[t])),y(""),C(!0),Promise.resolve(function(e,r){try{var n=function(e,r){try{var n=Promise.resolve(fetch(l+"/prompt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({messages:[].concat(f,[t])})})).then(function(e){if(!e.ok)throw new Error("Failed to get response");return Promise.resolve(e.json()).then(function(e){h(function(t){return[].concat(t,[{role:"assistant",content:e.response}])})})})}catch(e){return r()}return n&&n.then?n.then(void 0,r):n}(0,function(){o.toast.error("Failed to get response")})}catch(e){return r(!0,e)}return n&&n.then?n.then(r.bind(null,!1),r.bind(null,!0)):r(!1,n)}(0,function(e,t){if(C(!1),e)throw t;return t}))}catch(e){return Promise.reject(e)}},style:w.inputContainer},i.createElement("div",{style:w.inputWrapper},i.createElement("input",{type:"text",value:g,onChange:function(e){return y(e.target.value)},placeholder:"Type your message...",style:w.input}),i.createElement("button",{type:"submit",disabled:x,style:w.sendButton},i.createElement(n.IoSendSharp,{style:w.sendButton}))))):i.createElement("button",{onClick:function(){return m(!0)},className:"chat-button"},i.createElement(t.SiChatbot,{style:w.chatbotIcon})))};
//# sourceMappingURL=index.cjs.map
