!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-icons/si"),require("react-icons/gi"),require("react-icons/io5"),require("react-hot-toast")):"function"==typeof define&&define.amd?define(["exports","react","react-icons/si","react-icons/gi","react-icons/io5","react-hot-toast"],t):t((e||self).npmChatpilot={},e.react,e.ReactIconsSi,e.ReactIconsGi,e.ReactIconsIo5,e.reactHotToast)}(this,function(e,t,r,n,o,i){function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var s=/*#__PURE__*/a(t);e.Capitalize=function(e){var t=e.str;return t.charAt(0).toUpperCase()+t.slice(1)},e.ChatPilotBot=function(e){var a=e.apiKey,c=e.apiUrl,l=void 0===c?"https://api.chatpilot.com":c,u=t.useState(!1),d=u[0],m=u[1],p=t.useState([]),h=p[0],f=p[1],g=t.useState(""),b=g[0],y=g[1],v=t.useState(!1),C=v[0],E=v[1],x=t.useRef(null);t.useEffect(function(){var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[h]);var w={container:{position:"fixed",bottom:"1rem",right:"1rem"},chatContainer:{width:"24rem",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",backgroundColor:"white",borderBottom:"1px solid #e5e7eb"},headerTitle:{display:"flex",alignItems:"center",gap:"0.5rem"},closeButton:{padding:"0.5rem",borderRadius:"9999px",":hover":{backgroundColor:"#f3f4f6"}},messagesContainer:{height:"24rem",overflowY:"auto",padding:"1rem"},messageWrapper:function(e){return{marginBottom:"1rem",display:"flex",justifyContent:e?"flex-end":"flex-start"}},message:function(e){return{maxWidth:"80%",borderRadius:"0.5rem",padding:"0.75rem",backgroundColor:e?"#3b82f6":"#e5e7eb",color:e?"white":"black"}},inputContainer:{padding:"1rem",borderTop:"1px solid #e5e7eb"},inputWrapper:{display:"flex",gap:"0.5rem"},input:{flexGrow:1,borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"0.5rem",outline:"none",":focus":{ring:"2px",ringColor:"#3b82f6"}},sendButton:{backgroundColor:"#3b82f6",color:"white",padding:"0.5rem",borderRadius:"0.5rem",":hover":{backgroundColor:"#2563eb"},":disabled":{opacity:.5}},chatButton:{backgroundColor:"#3b82f6",color:"white",padding:"1rem",borderRadius:"9999px",":hover":{backgroundColor:"#2563eb"}}};return s.createElement("div",{className:"chatpilot-container"},s.createElement(i.Toaster,{position:"top-right"}),d?s.createElement("div",{style:w.chatContainer},s.createElement("div",{style:w.header},s.createElement("div",{style:w.headerTitle},s.createElement(r.SiChatbot,{style:{width:"1.5rem",height:"1.5rem"}}),s.createElement("span",{style:{fontWeight:600}},"ChatPilot")),s.createElement("button",{onClick:function(){return m(!1)},style:w.closeButton},s.createElement(n.GiCrossedBones,{style:{width:"1.25rem",height:"1.25rem"}}))),s.createElement("div",{className:"chatpilot-messages"},h.map(function(e,t){return s.createElement("div",{key:t,style:w.messageWrapper("user"===e.role)},s.createElement("div",{style:w.message("user"===e.role)},e.content))}),C&&s.createElement("div",{style:w.messageWrapper(!1)},s.createElement("div",{style:w.message(!1)},"Typing...")),s.createElement("div",{ref:x})),s.createElement("form",{onSubmit:function(e){try{if(e.preventDefault(),!b.trim())return Promise.resolve();var t={role:"user",content:b};return f([].concat(h,[t])),y(""),E(!0),Promise.resolve(function(e,r){try{var n=function(e,r){try{var n=Promise.resolve(fetch(l+"/prompt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({messages:[].concat(h,[t])})})).then(function(e){if(!e.ok)throw new Error("Failed to get response");return Promise.resolve(e.json()).then(function(e){f(function(t){return[].concat(t,[{role:"assistant",content:e.response}])})})})}catch(e){return r()}return n&&n.then?n.then(void 0,r):n}(0,function(){i.toast.error("Failed to get response")})}catch(e){return r(!0,e)}return n&&n.then?n.then(r.bind(null,!1),r.bind(null,!0)):r(!1,n)}(0,function(e,t){if(E(!1),e)throw t;return t}))}catch(e){return Promise.reject(e)}},style:w.inputContainer},s.createElement("div",{style:w.inputWrapper},s.createElement("input",{type:"text",value:b,onChange:function(e){return y(e.target.value)},placeholder:"Type your message...",style:w.input}),s.createElement("button",{type:"submit",disabled:C,style:w.sendButton},s.createElement(o.IoSendSharp,{style:{width:"1.25rem",height:"1.25rem"}}))))):s.createElement("button",{onClick:function(){return m(!0)},style:w.chatButton},s.createElement(r.SiChatbot,{style:{width:"1.5rem",height:"1.5rem"}})))}});
//# sourceMappingURL=index.umd.js.map
